â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    æ£€æµ‹è·ç¦»è°ƒæ•´æŒ‡å— - å¿«é€Ÿå‚è€ƒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ é˜ˆå€¼ä½ç½®ï¼šBump_only.ino ç¬¬182-183è¡Œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å½“å‰é…ç½®ï¼ˆå·²ä¼˜åŒ–ä¸ºè¿œè·ç¦»æ£€æµ‹ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

bool line_active = line_avg > 25.0f;      // Lineé˜ˆå€¼
bool bump_active = bump_avg > 100.0f;     // Bumpé˜ˆå€¼

ç»“æœï¼š
  âœ… æ£€æµ‹è·ç¦»è¾ƒè¿œï¼ˆçº¦15-25cmï¼‰
  âš ï¸  å¯èƒ½ä¼šæœ‰è½»å¾®è¯¯æ£€æµ‹


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ¸å¿ƒåŸç†                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é˜ˆå€¼è¶Šä½ â† â†’ æ£€æµ‹è·ç¦»è¶Šè¿œ
é˜ˆå€¼è¶Šé«˜ â† â†’ æ£€æµ‹è·ç¦»è¶Šè¿‘

IRä¿¡å·å¼ºåº¦ä¸è·ç¦»çš„å…³ç³»ï¼š
  è¿‘è·ç¦»(5-10cm)  â†’ å¼ºä¿¡å· (Line: 80-150, Bump: 300-500)
  ä¸­è·ç¦»(10-20cm) â†’ ä¸­ä¿¡å· (Line: 40-80,  Bump: 150-300)
  è¿œè·ç¦»(20-30cm) â†’ å¼±ä¿¡å· (Line: 15-40,  Bump: 80-150)
  è¶…è¿œ(>30cm)     â†’ å¾ˆå¼±   (Line: <15,    Bump: <80)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    å¸¸ç”¨é…ç½®æ–¹æ¡ˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–¹æ¡ˆ1ï¼šè¶…è¿œè·ç¦»æ£€æµ‹ï¼ˆå½“å‰é…ç½®ï¼‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

bool line_active = line_avg > 25.0f;      
bool bump_active = bump_avg > 100.0f;     

æ£€æµ‹èŒƒå›´ï¼šçº¦15-25cm
ä¼˜ç‚¹ï¼šæ£€æµ‹è·ç¦»å¾ˆè¿œï¼Œé€‚åˆå¤§ç©ºé—´è·Ÿéš
ç¼ºç‚¹ï¼šå¯èƒ½è¯¯æ£€æµ‹èƒŒæ™¯å™ªéŸ³
é€‚ç”¨ï¼šå¼€é˜”ç©ºé—´ï¼Œéœ€è¦è¿œè·ç¦»è·Ÿéš


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–¹æ¡ˆ2ï¼šè¿œè·ç¦»æ£€æµ‹                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

bool line_active = line_avg > 35.0f;      
bool bump_active = bump_avg > 120.0f;     

æ£€æµ‹èŒƒå›´ï¼šçº¦12-20cm
ä¼˜ç‚¹ï¼šè·ç¦»è¾ƒè¿œï¼Œè¾ƒå°‘è¯¯æ£€æµ‹
ç¼ºç‚¹ï¼š-
é€‚ç”¨ï¼šå¤§å¤šæ•°åœºæ™¯ï¼ˆæ¨èï¼‰


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–¹æ¡ˆ3ï¼šä¸­ç­‰è·ç¦»æ£€æµ‹                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

bool line_active = line_avg > 50.0f;      
bool bump_active = bump_avg > 150.0f;     

æ£€æµ‹èŒƒå›´ï¼šçº¦8-15cm
ä¼˜ç‚¹ï¼šå¹³è¡¡è·ç¦»å’Œå‡†ç¡®æ€§
ç¼ºç‚¹ï¼šè·ç¦»ç¨è¿‘
é€‚ç”¨ï¼šæ™®é€šè·Ÿéšä»»åŠ¡


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–¹æ¡ˆ4ï¼šè¿‘è·ç¦»é«˜ç²¾åº¦æ£€æµ‹                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

bool line_active = line_avg > 70.0f;      
bool bump_active = bump_avg > 200.0f;     

æ£€æµ‹èŒƒå›´ï¼šçº¦5-12cm
ä¼˜ç‚¹ï¼šéå¸¸å‡†ç¡®ï¼Œå‡ ä¹æ— è¯¯æ£€æµ‹
ç¼ºç‚¹ï¼šæ£€æµ‹è·ç¦»çŸ­
é€‚ç”¨ï¼šè¿‘è·ç¦»ç²¾ç¡®è·Ÿéšï¼Œé¿å…è¯¯æ£€æµ‹


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    å¦‚ä½•é€‰æ‹©åˆé€‚çš„é˜ˆå€¼ï¼Ÿ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ­¥éª¤1ï¼šæ‰“å¼€è¯Šæ–­æ¨¡å¼
  â†’ ç¬¬20è¡Œï¼šconst bool DIAGNOSTIC_MODE = true;

æ­¥éª¤2ï¼šå°†Leaderæ”¾åœ¨ä¸åŒè·ç¦»æµ‹è¯•
  è¿‘è·ç¦»(5cm)   â†’ è®°å½•Lineå’ŒBumpçš„æ•°å€¼
  ä¸­è·ç¦»(15cm)  â†’ è®°å½•Lineå’ŒBumpçš„æ•°å€¼
  è¿œè·ç¦»(25cm)  â†’ è®°å½•Lineå’ŒBumpçš„æ•°å€¼

æ­¥éª¤3ï¼šæ ¹æ®éœ€æ±‚è®¾ç½®é˜ˆå€¼

ä¾‹å¦‚ï¼šä½ å¸Œæœ›æœ€è¿œæ£€æµ‹åˆ°20cm

  è§‚å¯Ÿæ•°æ®ï¼š
    5cm:  Line=120, Bump=400
    15cm: Line=45,  Bump=180
    20cm: Line=30,  Bump=110

  è®¾ç½®é˜ˆå€¼ï¼š
    Lineé˜ˆå€¼ = 30 * 0.8 = 24  (ç•¥ä½äº20cmçš„å€¼)
    Bumpé˜ˆå€¼ = 110 * 0.8 = 88 (ç•¥ä½äº20cmçš„å€¼)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    å¸¸è§é—®é¢˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ é—®é¢˜ï¼šæ£€æµ‹è·ç¦»å¤ªçŸ­ï¼Œè¶…è¿‡10cmå°±æ£€æµ‹ä¸åˆ°

è§£å†³æ–¹æ¡ˆï¼š
  â˜‘ï¸  é™ä½é˜ˆå€¼
  â˜‘ï¸  Lineæ”¹æˆ 20-30
  â˜‘ï¸  Bumpæ”¹æˆ 80-100

  ä¿®æ”¹ä½ç½®ï¼šç¬¬182-183è¡Œ
  bool line_active = line_avg > 25.0f;
  bool bump_active = bump_avg > 85.0f;


âŒ é—®é¢˜ï¼šä¸€ç›´æ˜¾ç¤ºLINEæˆ–BOTHï¼Œå³ä½¿Leaderå¾ˆè¿œ

åŸå› ï¼šé˜ˆå€¼å¤ªä½ï¼Œæ£€æµ‹åˆ°èƒŒæ™¯å™ªéŸ³
è§£å†³æ–¹æ¡ˆï¼š
  â˜‘ï¸  æé«˜é˜ˆå€¼
  â˜‘ï¸  Lineæ”¹æˆ 50-70
  â˜‘ï¸  Bumpæ”¹æˆ 150-200


âŒ é—®é¢˜ï¼šæ£€æµ‹ä¸ç¨³å®šï¼Œä¸€ä¼šå„¿æœ‰ä¸€ä¼šå„¿æ²¡æœ‰

åŸå› ï¼šåˆšå¥½åœ¨é˜ˆå€¼è¾¹ç¼˜
è§£å†³æ–¹æ¡ˆ1ï¼šé™ä½é˜ˆå€¼ï¼ˆä¼˜å…ˆæ£€æµ‹åˆ°ï¼‰
  Lineé˜ˆå€¼ -= 10
  Bumpé˜ˆå€¼ -= 20

è§£å†³æ–¹æ¡ˆ2ï¼šæé«˜é˜ˆå€¼ï¼ˆé¿å…è¯¯æ£€æµ‹ï¼‰
  Lineé˜ˆå€¼ += 10
  Bumpé˜ˆå€¼ += 20


âŒ é—®é¢˜ï¼šLeaderåœ¨ä¾§é¢æ—¶æ£€æµ‹ä¸åˆ°

åŸå› ï¼š
  - Lineä¼ æ„Ÿå™¨é¢å‘ä¸‹æ–¹ï¼Œä¾§é¢ä¿¡å·å¼±
  - Bumpä¼ æ„Ÿå™¨é¢å‘å‰æ–¹ï¼Œä¾§é¢ä¿¡å·å¼±
è§£å†³æ–¹æ¡ˆï¼š
  â˜‘ï¸  å¤§å¹…é™ä½Lineé˜ˆå€¼ï¼ˆæ”¹æˆ15-20ï¼‰
  â˜‘ï¸  ä¿æŒFolloweræ­£å¯¹Leader


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    é«˜çº§æŠ€å·§
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æŠ€å·§1ï¼šåŠ¨æ€é˜ˆå€¼ï¼ˆéœ€è¦ä¿®æ”¹ä»£ç ï¼‰

æ ¹æ®ç¯å¢ƒå…‰è‡ªåŠ¨è°ƒæ•´ï¼š
  if (background_avg > 500) {
    // å¼ºç¯å¢ƒå…‰ï¼Œæé«˜é˜ˆå€¼
    line_threshold = 50.0f;
  } else {
    // å¼±ç¯å¢ƒå…‰ï¼Œé™ä½é˜ˆå€¼
    line_threshold = 25.0f;
  }


æŠ€å·§2ï¼šè·ç¦»åˆ†çº§æ£€æµ‹

  if (line_avg > 80) {
    distance_status = "å¾ˆè¿‘(<8cm)";
  } else if (line_avg > 40) {
    distance_status = "ä¸­ç­‰(8-15cm)";
  } else if (line_avg > 20) {
    distance_status = "è¾ƒè¿œ(15-25cm)";
  } else {
    distance_status = "å¤ªè¿œæˆ–æ— ä¿¡å·";
  }


æŠ€å·§3ï¼šä¿¡å·å¹³æ»‘æ»¤æ³¢

ä½¿ç”¨ç§»åŠ¨å¹³å‡å‡å°‘æŠ–åŠ¨ï¼š
  static float line_history[5] = {0};
  // ... æ›´æ–°historyæ•°ç»„
  float line_avg_filtered = (history[0]+...+history[4])/5;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    æµ‹è¯•è®°å½•è¡¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è®°å½•ä½ çš„æµ‹è¯•æ•°æ®ï¼š

è·ç¦»(cm) | Lineå€¼ | Bumpå€¼ | å¤‡æ³¨
---------|--------|--------|--------
   5     |        |        |
  10     |        |        |
  15     |        |        |
  20     |        |        |
  25     |        |        |
  30     |        |        |

ä½ çš„æœ€ä½³é˜ˆå€¼é…ç½®ï¼š

Lineé˜ˆå€¼ = _______  (ç”¨äº______cmæ£€æµ‹è·ç¦»)
Bumpé˜ˆå€¼ = _______  (ç”¨äº______cmæ£€æµ‹è·ç¦»)

æµ‹è¯•ç¯å¢ƒï¼š
  æ¡Œé¢é¢œè‰²ï¼š_________
  ç¯å¢ƒå…‰ï¼š_________
  æ—¥æœŸï¼š_________
  å¤‡æ³¨ï¼š_________________________


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    å¿«é€Ÿè°ƒæ•´æµç¨‹å›¾
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å¼€å§‹
  â†“
ä¸Šä¼ ä»£ç ï¼Œæ‰“å¼€è¯Šæ–­æ¨¡å¼
  â†“
è§‚å¯Ÿä¸åŒè·ç¦»çš„Lineå’ŒBumpæ•°å€¼
  â†“
ç¡®å®šç›®æ ‡æ£€æµ‹è·ç¦»ï¼ˆæ¯”å¦‚20cmï¼‰
  â†“
è®¾ç½®é˜ˆå€¼ = è¯¥è·ç¦»æ•°å€¼ * 0.8
  â†“
é‡æ–°ä¸Šä¼ æµ‹è¯•
  â†“
æ£€æµ‹è·ç¦»å¤ªçŸ­ï¼Ÿ â†’ æ˜¯ â†’ é™ä½é˜ˆå€¼10-20% â†’ é‡æ–°æµ‹è¯•
      â†“ å¦
è¯¯æ£€æµ‹å¤ªå¤šï¼Ÿ   â†’ æ˜¯ â†’ æé«˜é˜ˆå€¼10-20% â†’ é‡æ–°æµ‹è¯•
      â†“ å¦
     å®Œæˆï¼


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

